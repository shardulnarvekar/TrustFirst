# ğŸ¨ SETU AI - Visual Architecture Guide

## ğŸ—ï¸ System Architecture (Big Picture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER'S BROWSER                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Landing   â”‚  â”‚ Dashboard  â”‚  â”‚  Create    â”‚           â”‚
â”‚  â”‚   Page     â”‚  â”‚   Page     â”‚  â”‚ Agreement  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                              â”‚
â”‚                    FRONTEND (Next.js)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ HTTP Requests
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     API ROUTES (Backend)                      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ /agreementsâ”‚  â”‚   /users   â”‚  â”‚   /auth    â”‚           â”‚
â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                       â”‚
               â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚  â”‚                   â”‚
    â”‚   MongoDB Atlas     â”‚  â”‚  Firebase Auth    â”‚
    â”‚   (Database)        â”‚  â”‚  (Login System)   â”‚
    â”‚                     â”‚  â”‚                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚
    â”‚   NodeMailer        â”‚
    â”‚   (Email Service)   â”‚
    â”‚                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow (How Information Moves)

### Example: Creating an Agreement

```
STEP 1: User Fills Form
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Browser   â”‚
â”‚                 â”‚
â”‚  [Create Form]  â”‚
â”‚  Name: Sarah    â”‚
â”‚  Amount: $2500  â”‚
â”‚  Date: Mar 15   â”‚
â”‚                 â”‚
â”‚  [Submit] â—„â”€â”€â”€â”€â”€â”¼â”€â”€â”€ User clicks button
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ POST /api/agreements
         â”‚ { borrowerEmail, amount, ... }
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Route     â”‚
â”‚                 â”‚
â”‚  1. Validate    â”‚
â”‚  2. Check users â”‚
â”‚  3. Save to DB  â”‚
â”‚  4. Send emails â”‚
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚
         â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB    â”‚  â”‚ NodeMailer  â”‚
â”‚             â”‚  â”‚             â”‚
â”‚  Save       â”‚  â”‚  Send email â”‚
â”‚  Agreement  â”‚  â”‚  to Sarah   â”‚
â”‚             â”‚  â”‚  & Mike     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Response: { success: true }
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Browser   â”‚
â”‚                 â”‚
â”‚  âœ… Success!    â”‚
â”‚  Redirect to    â”‚
â”‚  Dashboard      â”‚
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ File Structure (Visual Tree)

```
setu-ai/
â”‚
â”œâ”€â”€ ğŸ“„ .env                          â† Secret keys
â”œâ”€â”€ ğŸ“„ .env.local                    â† Local secrets
â”œâ”€â”€ ğŸ“„ package.json                  â† Dependencies list
â”œâ”€â”€ ğŸ“„ firebase.ts                   â† Auth setup
â”œâ”€â”€ ğŸ“„ next.config.mjs               â† Next.js config
â”‚
â”œâ”€â”€ ğŸ“ app/                          â† All pages
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ page.tsx                  â† Landing page (/)
â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx                â† Main wrapper
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ auth/                     â† Login/Signup
â”‚   â”‚   â”œâ”€â”€ ğŸ“ signin/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx          â† Sign in page
â”‚   â”‚   â””â”€â”€ ğŸ“ signup/
â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx          â† Sign up page
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ dashboard/                â† After login
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ page.tsx              â† Main dashboard
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx            â† Dashboard wrapper
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ create/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx          â† Create agreement
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ agreement/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ [id]/
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx      â† Agreement details
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ notifications/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx          â† Notifications
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ profile/
â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx          â† User profile
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ api/                      â† Backend logic
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ agreements/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts          â† Create/fetch
â”‚       â”‚   â””â”€â”€ ğŸ“ [id]/
â”‚       â”‚       â”œâ”€â”€ ğŸ“„ route.ts      â† Get/update/delete
â”‚       â”‚       â”œâ”€â”€ ğŸ“ approve-witness/
â”‚       â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts  â† Witness approval
â”‚       â”‚       â””â”€â”€ ğŸ“ send-reminder/
â”‚       â”‚           â””â”€â”€ ğŸ“„ route.ts  â† Send reminder
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ auth/
â”‚       â”‚   â”œâ”€â”€ ğŸ“ signin/
â”‚       â”‚   â”‚   â””â”€â”€ ğŸ“„ route.ts      â† Login API
â”‚       â”‚   â””â”€â”€ ğŸ“ signup/
â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts      â† Register API
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ notifications/
â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts          â† Notifications API
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“ users/
â”‚           â””â”€â”€ ğŸ“ [uid]/
â”‚               â””â”€â”€ ğŸ“„ route.ts      â† User API
â”‚
â”œâ”€â”€ ğŸ“ models/                       â† Database schemas
â”‚   â”œâ”€â”€ ğŸ“„ User.ts                   â† User structure
â”‚   â”œâ”€â”€ ğŸ“„ Agreement.ts              â† Agreement structure
â”‚   â””â”€â”€ ğŸ“„ Notification.ts           â† Notification structure
â”‚
â”œâ”€â”€ ğŸ“ lib/                          â† Helper functions
â”‚   â”œâ”€â”€ ğŸ“„ mongodb.ts                â† DB connection
â”‚   â”œâ”€â”€ ğŸ“„ email.ts                  â† Email templates
â”‚   â””â”€â”€ ğŸ“„ utils.ts                  â† Utilities
â”‚
â””â”€â”€ ğŸ“ components/                   â† Reusable UI
    â”œâ”€â”€ ğŸ“„ theme-provider.tsx        â† Dark/light mode
    â””â”€â”€ ğŸ“ ui/                       â† UI components
        â”œâ”€â”€ ğŸ“„ button.tsx            â† Button
        â”œâ”€â”€ ğŸ“„ input.tsx             â† Text field
        â”œâ”€â”€ ğŸ“„ card.tsx              â† Container
        â””â”€â”€ ... (50+ more)
```

---

## ğŸ”„ User Journey Map

### Journey 1: New User Signs Up

```
START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Visit Site  â”‚ â† Landing page (app/page.tsx)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click       â”‚
â”‚ "Sign Up"   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fill Form   â”‚ â† Signup page (app/auth/signup/page.tsx)
â”‚ Name        â”‚
â”‚ Email       â”‚
â”‚ Password    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Submit      â”‚ â†’ API: /api/auth/signup
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚
       â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Firebase â”‚  â”‚ MongoDB  â”‚
â”‚ Create   â”‚  â”‚ Save     â”‚
â”‚ Account  â”‚  â”‚ User     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redirect to â”‚ â† Dashboard (app/dashboard/page.tsx)
â”‚ Dashboard   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
END
```

### Journey 2: Create Agreement

```
START (Dashboard)
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click       â”‚
â”‚ "Create"    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1:     â”‚ â† Create page (app/dashboard/create/page.tsx)
â”‚ Loan Detailsâ”‚
â”‚ - Borrower  â”‚
â”‚ - Amount    â”‚
â”‚ - Date      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2:     â”‚
â”‚ Buffer Days â”‚
â”‚ (0-14 days) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3:     â”‚
â”‚ Add Witness â”‚
â”‚ (Optional)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4:     â”‚
â”‚ Upload      â”‚
â”‚ Proof       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Submit      â”‚ â†’ API: POST /api/agreements
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              â”‚              â”‚
       â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check    â”‚  â”‚ Save to  â”‚  â”‚ Send     â”‚
â”‚ Users    â”‚  â”‚ MongoDB  â”‚  â”‚ Emails   â”‚
â”‚ Exist    â”‚  â”‚          â”‚  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Success!    â”‚
â”‚ Show on     â”‚
â”‚ Dashboard   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
END
```

---

## ğŸ“§ Email Flow

```
TRIGGER: Agreement Created
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API: /api/agreements (POST)    â”‚
â”‚                                 â”‚
â”‚  1. Create agreement in DB      â”‚
â”‚  2. Call sendEmail() function   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚              â”‚
         â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email to    â”‚  â”‚ Email to    â”‚  â”‚ Email to    â”‚
â”‚ BORROWER    â”‚  â”‚ WITNESS     â”‚  â”‚ LENDER      â”‚
â”‚             â”‚  â”‚             â”‚  â”‚ (later)     â”‚
â”‚ "John wants â”‚  â”‚ "John wants â”‚  â”‚             â”‚
â”‚ to lend you â”‚  â”‚ you to      â”‚  â”‚             â”‚
â”‚ money"      â”‚  â”‚ witness"    â”‚  â”‚             â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚ [View       â”‚  â”‚ [Review &   â”‚  â”‚             â”‚
â”‚ Agreement]  â”‚  â”‚ Approve]    â”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚              â”‚
         â”‚              â”‚
         â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Borrower    â”‚  â”‚ Witness     â”‚
â”‚ clicks link â”‚  â”‚ clicks link â”‚
â”‚             â”‚  â”‚             â”‚
â”‚ Opens app   â”‚  â”‚ Opens app   â”‚
â”‚ Sees        â”‚  â”‚ Approves    â”‚
â”‚ agreement   â”‚  â”‚ agreement   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Email to    â”‚
                 â”‚ LENDER      â”‚
                 â”‚             â”‚
                 â”‚ "Mike       â”‚
                 â”‚ approved    â”‚
                 â”‚ your        â”‚
                 â”‚ agreement"  â”‚
                 â”‚             â”‚
                 â”‚ [View       â”‚
                 â”‚ Agreement]  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ­ Role-Based Access (Who Sees What)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AGREEMENT DETAIL PAGE                       â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Agreement Info (Everyone sees this)           â”‚    â”‚
â”‚  â”‚  - Borrower name                               â”‚    â”‚
â”‚  â”‚  - Amount                                      â”‚    â”‚
â”‚  â”‚  - Due date                                    â”‚    â”‚
â”‚  â”‚  - Trust score                                 â”‚    â”‚
â”‚  â”‚  - Timeline                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  LENDER ONLY                                   â”‚    â”‚
â”‚  â”‚  âœ… Can see buffer days                        â”‚    â”‚
â”‚  â”‚  âœ… Can toggle strict mode                     â”‚    â”‚
â”‚  â”‚  âœ… Can send reminders                         â”‚    â”‚
â”‚  â”‚  âœ… Can settle agreement                       â”‚    â”‚
â”‚  â”‚  âœ… Sees "Settle Up / Close Loan" button      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  BORROWER ONLY                                 â”‚    â”‚
â”‚  â”‚  âœ… Can view all details                       â”‚    â”‚
â”‚  â”‚  âœ… Can upload payment proof (future)          â”‚    â”‚
â”‚  â”‚  âŒ Cannot settle agreement                    â”‚    â”‚
â”‚  â”‚  âŒ Cannot send reminders                      â”‚    â”‚
â”‚  â”‚  âœ… Sees disabled "Mark as Paid" button       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  WITNESS ONLY                                  â”‚    â”‚
â”‚  â”‚  âœ… Can view agreement                         â”‚    â”‚
â”‚  â”‚  âŒ Cannot see amount (privacy!)               â”‚    â”‚
â”‚  â”‚  âœ… Can approve agreement                      â”‚    â”‚
â”‚  â”‚  âœ… Sees "Approve as Witness" button          â”‚    â”‚
â”‚  â”‚  âŒ Cannot settle                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Database Structure

```
MongoDB Atlas (Cloud Database)
â”‚
â”œâ”€â”€ ğŸ“Š Collection: users
â”‚   â”‚
â”‚   â”œâ”€â”€ Document 1:
â”‚   â”‚   {
â”‚   â”‚     uid: "firebase_abc123",
â”‚   â”‚     name: "John Doe",
â”‚   â”‚     email: "john@example.com",
â”‚   â”‚     trustScore: 100,
â”‚   â”‚     createdAt: "2026-01-28"
â”‚   â”‚   }
â”‚   â”‚
â”‚   â”œâ”€â”€ Document 2:
â”‚   â”‚   {
â”‚   â”‚     uid: "firebase_xyz789",
â”‚   â”‚     name: "Sarah Chen",
â”‚   â”‚     email: "sarah@gmail.com",
â”‚   â”‚     trustScore: 100,
â”‚   â”‚     createdAt: "2026-01-15"
â”‚   â”‚   }
â”‚   â”‚
â”‚   â””â”€â”€ ... more users
â”‚
â”œâ”€â”€ ğŸ“Š Collection: agreements
â”‚   â”‚
â”‚   â”œâ”€â”€ Document 1:
â”‚   â”‚   {
â”‚   â”‚     _id: "agreement_123",
â”‚   â”‚     lenderId: "firebase_abc123",
â”‚   â”‚     borrowerId: "firebase_xyz789",
â”‚   â”‚     amount: 2500,
â”‚   â”‚     dueDate: "2026-03-15",
â”‚   â”‚     status: "active",
â”‚   â”‚     witnessApproved: true,
â”‚   â”‚     trustScore: 100
â”‚   â”‚   }
â”‚   â”‚
â”‚   â””â”€â”€ ... more agreements
â”‚
â””â”€â”€ ğŸ“Š Collection: notifications
    â”‚
    â”œâ”€â”€ Document 1:
    â”‚   {
    â”‚     _id: "notif_456",
    â”‚     userId: "firebase_abc123",
    â”‚     type: "witness_approved",
    â”‚     title: "Witness Approved",
    â”‚     read: false
    â”‚   }
    â”‚
    â””â”€â”€ ... more notifications
```

---

## ğŸ” Authentication Flow

```
USER SIGNS UP
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Signup Form    â”‚
â”‚  - Email        â”‚
â”‚  - Password     â”‚
â”‚  - Name         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firebase Auth  â”‚ â† Creates account
â”‚                 â”‚ â† Hashes password
â”‚                 â”‚ â† Returns UID
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB        â”‚ â† Saves user data
â”‚                 â”‚ â† Sets trustScore: 100
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User logged in â”‚ â† Session created
â”‚  Redirect to    â”‚
â”‚  Dashboard      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

USER SIGNS IN
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Signin Form    â”‚
â”‚  - Email        â”‚
â”‚  - Password     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firebase Auth  â”‚ â† Verifies credentials
â”‚                 â”‚ â† Returns UID + token
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User logged in â”‚ â† Session created
â”‚  Redirect to    â”‚
â”‚  Dashboard      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

PROTECTED PAGES
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User visits    â”‚
â”‚  /dashboard     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check if       â”‚ â† Firebase checks session
â”‚  logged in?     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
  YES        NO
    â”‚         â”‚
    â”‚         â–¼
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚ Redirect to â”‚
    â”‚    â”‚ /auth/signinâ”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show        â”‚
â”‚ Dashboard   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This visual guide should help you understand how everything connects! ğŸ¨**

